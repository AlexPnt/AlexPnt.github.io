<!DOCTYPE html>
<html>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Performance is an typical concern when developing applications. In order to have a good back-end performance it is important to be aware of memory footprints that our programs uses, CPU usage, databas">
<meta name="keywords" content="django,performance,python">
<meta property="og:type" content="article">
<meta property="og:title" content="Performance tips for Django applications">
<meta property="og:url" content="https://alexpnt.github.io/2017/08/18/django-performance-tips/index.html">
<meta property="og:site_name" content="Alexandre Pinto">
<meta property="og:description" content="Performance is an typical concern when developing applications. In order to have a good back-end performance it is important to be aware of memory footprints that our programs uses, CPU usage, databas">
<meta property="og:updated_time" content="2017-08-22T15:24:50.758Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Performance tips for Django applications">
<meta name="twitter:description" content="Performance is an typical concern when developing applications. In order to have a good back-end performance it is important to be aware of memory footprints that our programs uses, CPU usage, databas">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Performance tips for Django applications</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/cv/">CV</a></li>
         
          <li><a href="/archives/">Blog</a></li>
         
          <li><a href="/gallery/">Gallery</a></li>
         
          <li><a href="/contact/">Contact</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="/2017/08/15/docker-cleanup/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://alexpnt.github.io/2017/08/18/django-performance-tips/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://alexpnt.github.io/2017/08/18/django-performance-tips/&text=Performance tips for Django applications"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://alexpnt.github.io/2017/08/18/django-performance-tips/&title=Performance tips for Django applications"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://alexpnt.github.io/2017/08/18/django-performance-tips/&is_video=false&description=Performance tips for Django applications"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Performance tips for Django applications&body=Check out this article: https://alexpnt.github.io/2017/08/18/django-performance-tips/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://alexpnt.github.io/2017/08/18/django-performance-tips/&title=Performance tips for Django applications"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://alexpnt.github.io/2017/08/18/django-performance-tips/&title=Performance tips for Django applications"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://alexpnt.github.io/2017/08/18/django-performance-tips/&title=Performance tips for Django applications"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://alexpnt.github.io/2017/08/18/django-performance-tips/&title=Performance tips for Django applications"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://alexpnt.github.io/2017/08/18/django-performance-tips/&name=Performance tips for Django applications&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Use-count-instead-of-len-in-querysets"><span class="toc-number">1.</span> <span class="toc-text">Use .count() instead of len() in querysets</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Use-a-combination-of-filter-and-exists-to-test-existence-and-membership"><span class="toc-number">2.</span> <span class="toc-text">Use a combination of .filter() and .exists() to test existence and membership</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Delay-queryset-evaluations"><span class="toc-number">3.</span> <span class="toc-text">Delay queryset evaluations</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Avoid-caching-mechanisms-for-one-time-operations"><span class="toc-number">4.</span> <span class="toc-text">Avoid caching mechanisms for one time operations</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Fetch-only-the-required-columns"><span class="toc-number">5.</span> <span class="toc-text">Fetch only the required columns</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Fetch-related-objects-in-a-single-batch"><span class="toc-number">6.</span> <span class="toc-text">Fetch related objects in a single batch</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Page-results"><span class="toc-number">7.</span> <span class="toc-text">Page results</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Use-distributed-and-asynchronous-processing"><span class="toc-number">8.</span> <span class="toc-text">Use distributed and asynchronous processing</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Performance tips for Django applications
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Alexandre Pinto</span>
      </span>
      
    <div class="postdate">
        <time datetime="2017-08-18T21:06:19.000Z" itemprop="datePublished">2017-08-18</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/django/">django</a>, <a class="tag-link" href="/tags/performance/">performance</a>, <a class="tag-link" href="/tags/python/">python</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>Performance is an typical concern when developing applications. In order to have a good back-end performance it is important to be aware of memory footprints that our programs uses, CPU usage, database handling, etc. If no precaution measures are taken, these can quickly become bottlenecks and hurt the general performance of our system. This post shows a collection of performance tips that we can use in our Django application in order to save us from headaches in the future.</p>
<h2 id="Use-count-instead-of-len-in-querysets"><a href="#Use-count-instead-of-len-in-querysets" class="headerlink" title="Use .count() instead of len() in querysets"></a>Use .count() instead of len() in querysets</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">musics = Music.objects.all()</div><div class="line">n_records = musics.count()</div></pre></td></tr></table></figure>
<p>Using the <em>.count()</em> is faster since it uses the <em>COUNT()</em> function at a database level. The <em>len()</em> method forces the queryset to be evaluated and retrieve results that you we will not use if all we want to do is count how many objects are there.</p>
<h2 id="Use-a-combination-of-filter-and-exists-to-test-existence-and-membership"><a href="#Use-a-combination-of-filter-and-exists-to-test-existence-and-membership" class="headerlink" title="Use a combination of .filter() and .exists() to test existence and membership"></a>Use a combination of .filter() and .exists() to test existence and membership</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">musics = Music.objects.filter(title=<span class="string">'Django rocks'</span>)</div><div class="line"><span class="keyword">if</span> musics.exists():</div><div class="line">    ...</div></pre></td></tr></table></figure>
<p>Django provides an .exists() method that we can use instead of counting objects with <em>.count()</em> or testing entries for inclusion with <em>obj in queryset</em> .</p>
<h2 id="Delay-queryset-evaluations"><a href="#Delay-queryset-evaluations" class="headerlink" title="Delay queryset evaluations"></a>Delay queryset evaluations</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">musics = Music.objects.all()</div><div class="line"> </div><div class="line"><span class="comment"># typical case of fetching all data from database into memory</span></div><div class="line"><span class="keyword">for</span> music <span class="keyword">in</span> musics:</div><div class="line">    ...</div></pre></td></tr></table></figure>
<p>Django querysets are lazy, i.e, they are only evaluated (database hits) when strictly necessary, so we should create and combine querysets before performing certain operations such as iteration, <em>len()</em> or slicing which force the results to be fetched from the database. Trips to the database are more time consuming.</p>
<h2 id="Avoid-caching-mechanisms-for-one-time-operations"><a href="#Avoid-caching-mechanisms-for-one-time-operations" class="headerlink" title="Avoid caching mechanisms for one time operations"></a>Avoid caching mechanisms for one time operations</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">musics = Music.objects.all()</div><div class="line"> </div><div class="line"><span class="comment"># avoids queryset caching</span></div><div class="line"><span class="keyword">for</span> music <span class="keyword">in</span> musics.iterator():</div><div class="line">    ...</div></pre></td></tr></table></figure>
<p>The <em>.iterator()</em> method bypasses the internal caching mechanisms and might be useful if we know we are not going to use these objects anymore. Also, this largely reduces the memory footprint, which can be useful if we are loading millions of rows from the database.</p>
<h2 id="Fetch-only-the-required-columns"><a href="#Fetch-only-the-required-columns" class="headerlink" title="Fetch only the required columns"></a>Fetch only the required columns</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># returns a dict</span></div><div class="line">musics = Music.objects.values(<span class="string">'title'</span>,<span class="string">'album'</span>)</div></pre></td></tr></table></figure>
<p>or </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># returns a list</span></div><div class="line">musics = Music.objects.value_list(<span class="string">'title'</span>,<span class="string">'album'</span>)</div></pre></td></tr></table></figure>
<p>These methods avoid creating full model instances and retrieve only the desired field values, avoiding the extra work of fetching the extra columns.</p>
<h2 id="Fetch-related-objects-in-a-single-batch"><a href="#Fetch-related-objects-in-a-single-batch" class="headerlink" title="Fetch related objects in a single batch"></a>Fetch related objects in a single batch</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># fetches related many-to-many and many-to-one objects</span></div><div class="line">musics = Music.objects.all().prefetch_related(<span class="string">'genres'</span>)</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># fetches foreign key relations and one-to-one objects</span></div><div class="line">musics = Music.objects.all().select_related(<span class="string">'author'</span>)</div></pre></td></tr></table></figure>
<p>These methods retrieve additional objects, to avoid fetching them later. This also caches all the results into memory, which may or not be desirable.</p>
<h2 id="Page-results"><a href="#Page-results" class="headerlink" title="Page results"></a>Page results</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> django.core.paginator <span class="keyword">import</span> Paginator</div><div class="line"> </div><div class="line">musics = Music.objects.all()</div><div class="line"></div><div class="line">paginator = Paginator(musics, per_page = <span class="number">2000</span>)</div><div class="line"><span class="keyword">for</span> page <span class="keyword">in</span> paginator.page_range:</div><div class="line">    <span class="keyword">for</span> obj <span class="keyword">in</span> paginator.page(page).object_list:</div><div class="line">    	...</div></pre></td></tr></table></figure>
<p>Pagination avoids loading all the objects into memory. This will drastically reduce the memory usage since it fetches slices of our dataset, one chunk of rows at a time, from the database.</p>
<h2 id="Use-distributed-and-asynchronous-processing"><a href="#Use-distributed-and-asynchronous-processing" class="headerlink" title="Use distributed and asynchronous processing"></a>Use distributed and asynchronous processing</h2><p>External concurrency libraries such as <a href="http://www.tornadoweb.org/en/stable/" target="_blank" rel="external">Tornado</a>, <a href="https://twistedmatrix.com/trac/" target="_blank" rel="external">Twisted</a> or <a href="https://docs.python.org/3/library/asyncio.html" target="_blank" rel="external">Asyncio</a> provide non-blocking behavior and asynchronous I/O, great for performing I/O bound tasks such as reading and writing to disk/network. <a href="http://www.celeryproject.org/" target="_blank" rel="external">Celery</a> is also great to perform distributed and CPU bound background tasks.</p>
<p>Here is an example of an hypothetical processing of electronic consumption bills, using the backport version of asyncio for Python 2.7.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> django.conf <span class="keyword">import</span> settings</div><div class="line"><span class="keyword">from</span> django.core.management.base <span class="keyword">import</span> BaseCommand, CommandError</div><div class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> transaction</div><div class="line"><span class="keyword">from</span> consumption.models <span class="keyword">import</span> ElectricConsumption</div><div class="line"> </div><div class="line"><span class="keyword">import</span> trollius <span class="keyword">as</span> asyncio</div><div class="line"><span class="keyword">from</span> trollius <span class="keyword">import</span> From</div><div class="line"> </div><div class="line">COUNTER = <span class="number">0</span></div><div class="line"> </div><div class="line"><span class="meta">@asyncio.coroutine</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">process_client</span><span class="params">(all_events, client_number, total)</span>:</span></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        client_events = all_events.filter(client_number=client_number).order_by(<span class="string">'timestamp'</span>)</div><div class="line"> </div><div class="line">        <span class="keyword">print</span> <span class="string">"Scheduled processing of client &#123;&#125;"</span>.format(client_number)</div><div class="line"> 		</div><div class="line">        <span class="comment">#specify that a context switch can happen here</span></div><div class="line">        <span class="keyword">yield</span> From(asyncio.sleep(<span class="number">1</span>))</div><div class="line"> </div><div class="line">        <span class="comment"># Compute bills (I/O bound task)</span></div><div class="line">        ElectricConsumption.set_bill(client_events)</div><div class="line"> </div><div class="line">        <span class="keyword">global</span> COUNTER</div><div class="line">        COUNTER += <span class="number">1</span></div><div class="line">        <span class="keyword">print</span> <span class="string">"Finished processing client &#123;&#125;: "</span> \</div><div class="line">              <span class="string">"(&#123;&#125; of &#123;&#125; = &#123;&#125; %))"</span>.format(client_number,</div><div class="line">                                          COUNTER, total,</div><div class="line">                                          str(COUNTER / float(total) * <span class="number">100</span>))</div><div class="line">    <span class="keyword">except</span>:</div><div class="line">        <span class="keyword">print</span> <span class="string">"Error processing client &#123;&#125;)"</span>.format(client_number)</div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Command</span><span class="params">(BaseCommand)</span>:</span></div><div class="line">    help = <span class="string">'Process electric consumptions'</span></div><div class="line"> </div><div class="line">    <span class="comment"># Process clients</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">handle</span><span class="params">(self, *args, **options)</span>:</span></div><div class="line">        all_events = ElectricConsumption.objects.all()</div><div class="line">        clients = all_events.values(<span class="string">'client_number'</span>)</div><div class="line">        total = clients.count()</div><div class="line">			</div><div class="line">        <span class="comment">#gets the event loop that manages the execution flow of our future tasks</span></div><div class="line">        loop = asyncio.get_event_loop()</div><div class="line">        tasks = []</div><div class="line">        <span class="keyword">with</span> transaction.atomic():</div><div class="line">            <span class="keyword">for</span> client <span class="keyword">in</span> clients:</div><div class="line">                client_number = client[<span class="string">'client_number'</span>]</div><div class="line"> </div><div class="line">                <span class="comment">#register our asynchronous tasks</span></div><div class="line">                tasks += [asyncio.ensure_future(process_client(all_events, client_number, total))]</div><div class="line">					</div><div class="line">            loop.run_until_complete(asyncio.wait(tasks))</div><div class="line">            loop.close()</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">$ python manage.py electric_bills.py</div><div class="line"> </div><div class="line">Scheduled processing of client 4521</div><div class="line">Scheduled processing of client 4174</div><div class="line">Scheduled processing of client 7531</div><div class="line">Scheduled processing of client 7584</div><div class="line">Scheduled processing of client 7419</div><div class="line">Finished processing client 7584: (1 of 5 = 20.0 %))</div><div class="line">Finished processing client 4174: (2 of 5 = 40.0 %))</div><div class="line">Finished processing client 7531: (3 of 5 = 60.0 %))</div><div class="line">Finished processing client 7419: (4 of 5 = 80.0 %))</div><div class="line">Finished processing client 4521: (5 of 5 = 100.0 %))</div></pre></td></tr></table></figure>
<p>These small tips make a noticeably difference when dealing with huge datasets and are good investments, regarding performance, in the long term. </p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/cv/">CV</a></li>
         
          <li><a href="/archives/">Blog</a></li>
         
          <li><a href="/gallery/">Gallery</a></li>
         
          <li><a href="/contact/">Contact</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Use-count-instead-of-len-in-querysets"><span class="toc-number">1.</span> <span class="toc-text">Use .count() instead of len() in querysets</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Use-a-combination-of-filter-and-exists-to-test-existence-and-membership"><span class="toc-number">2.</span> <span class="toc-text">Use a combination of .filter() and .exists() to test existence and membership</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Delay-queryset-evaluations"><span class="toc-number">3.</span> <span class="toc-text">Delay queryset evaluations</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Avoid-caching-mechanisms-for-one-time-operations"><span class="toc-number">4.</span> <span class="toc-text">Avoid caching mechanisms for one time operations</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Fetch-only-the-required-columns"><span class="toc-number">5.</span> <span class="toc-text">Fetch only the required columns</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Fetch-related-objects-in-a-single-batch"><span class="toc-number">6.</span> <span class="toc-text">Fetch related objects in a single batch</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Page-results"><span class="toc-number">7.</span> <span class="toc-text">Page results</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Use-distributed-and-asynchronous-processing"><span class="toc-number">8.</span> <span class="toc-text">Use distributed and asynchronous processing</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://alexpnt.github.io/2017/08/18/django-performance-tips/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://alexpnt.github.io/2017/08/18/django-performance-tips/&text=Performance tips for Django applications"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://alexpnt.github.io/2017/08/18/django-performance-tips/&title=Performance tips for Django applications"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://alexpnt.github.io/2017/08/18/django-performance-tips/&is_video=false&description=Performance tips for Django applications"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Performance tips for Django applications&body=Check out this article: https://alexpnt.github.io/2017/08/18/django-performance-tips/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://alexpnt.github.io/2017/08/18/django-performance-tips/&title=Performance tips for Django applications"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://alexpnt.github.io/2017/08/18/django-performance-tips/&title=Performance tips for Django applications"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://alexpnt.github.io/2017/08/18/django-performance-tips/&title=Performance tips for Django applications"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://alexpnt.github.io/2017/08/18/django-performance-tips/&title=Performance tips for Django applications"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://alexpnt.github.io/2017/08/18/django-performance-tips/&name=Performance tips for Django applications&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick='$("#toc-footer").toggle();return false;'><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick='$("#share-footer").toggle();return false;'><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick='$("#nav-footer").toggle();return false;'><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2017 Alexandre Pinto
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/cv/">CV</a></li>
         
          <li><a href="/archives/">Blog</a></li>
         
          <li><a href="/gallery/">Gallery</a></li>
         
          <li><a href="/contact/">Contact</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">


<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-43571022-2', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'alexpnt';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


